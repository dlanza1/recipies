
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Recipe Book</title>
    <link rel="stylesheet" href="index.css">
    <link rel="icon" type="image/svg+xml" href="favicon.png">
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="app">
        
        <main>
            <section id="suggestion-section" aria-labelledby="suggestion-heading-sr">
                <h2 id="suggestion-heading-sr" class="visually-hidden">Recipe Suggestions</h2>
                <button id="suggest-recipe-btn">Suggest a Recipe!</button>
                <div id="suggested-recipe-display" aria-live="polite">
                    <p>No suggestion yet. Click the button!</p>
                </div>
            </section>

            <section id="add-recipe-section" aria-labelledby="form-section-heading">
                <h2 id="form-section-heading">Add New Recipe</h2>
                <form id="recipe-form">
                    <div>
                        <label for="recipe-name">Recipe Name:</label>
                        <input type="text" id="recipe-name" name="recipe-name" required>
                    </div>
                    <div>
                        <label for="recipe-ingredients">Ingredients:</label>
                        <textarea id="recipe-ingredients" name="recipe-ingredients" rows="5"></textarea>
                        <small>Enter each ingredient on a new line. (Optional)</small>
                    </div>
                    <div>
                        <label for="recipe-instructions">Instructions:</label>
                        <textarea id="recipe-instructions" name="recipe-instructions" rows="8"></textarea>
                        <small>(Optional)</small>
                    </div>
                    <div id="recipe-rating-container">
                        <label id="recipe-rating-label">Rating:</label>
                        <div id="recipe-rating-stars" role="radiogroup" aria-labelledby="recipe-rating-label">
                            <span class="star-input" data-value="1" role="radio" aria-checked="false" tabindex="0" aria-label="Rate 1 star">☆</span>
                            <span class="star-input" data-value="2" role="radio" aria-checked="false" tabindex="0" aria-label="Rate 2 star">☆</span>
                            <span class="star-input" data-value="3" role="radio" aria-checked="false" tabindex="0" aria-label="Rate 3 star">☆</span>
                            <span class="star-input" data-value="4" role="radio" aria-checked="false" tabindex="0" aria-label="Rate 4 star">☆</span>
                            <span class="star-input" data-value="5" role="radio" aria-checked="false" tabindex="0" aria-label="Rate 5 star">☆</span>
                        </div>
                        
                    </div>
                    <button type="submit" id="form-submit-btn">Add Recipe</button>
                    <button type="button" id="cancel-edit-btn" class="hidden">Cancel Edit</button>
                </form>
            </section>

            <section id="recipes-list-section" aria-labelledby="recipes-list-heading">
                <h2 id="recipes-list-heading">My Recipes</h2>
                <div id="recipes-container">
                    <p>Loading recipes...</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <script>
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      const apiKey = urlParams.get('apiKey')

      // Initialize Firebase
      // IMPORTANT: Assumes FIREBASE_CONFIG_JSON is set as an environment variable stringified JSON
      // In Cloud Run, you'd set this environment variable with your Firebase project's web app config.
      const firebaseConfig = {
        apiKey,
        authDomain: "recipes-c67b2.firebaseapp.com",
        projectId: "recipes-c67b2",
        storageBucket: "recipes-c67b2.firebasestorage.app",
        messagingSenderId: "567737579574",
        appId: "1:567737579574:web:3b32e082bf8f082ef9c097",
        measurementId: "G-VWP291LKRL"
        };

      if (firebaseConfig) {
        try {
          firebase.initializeApp(firebaseConfig);
          console.log("Firebase initialized successfully.");
        } catch (e) {
          console.error("Error initializing Firebase App:", e);
          document.getElementById('recipes-container').innerHTML = '<p style="color:red;">Error: Could not initialize Firebase. Recipes cannot be loaded. Check console for details.</p>';
          firebaseConfig = null; // Mark as not configured properly
        }
      }
      // The index.tsx module will check if firebase.firestore is available.
    </script>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel" src="index.tsx"></script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
